<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Vanilla JS</title>
    <style>
        html, body {
            margin: 0px; overflow: hidden;
        }
        
    </style>
</head>
<body>
    <canvas></canvas>
    <script>
        const canvas = document.querySelector("canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const ctx = canvas.getContext("2d");

        const grid = {}
        const gridSize = 5
        initGrid()

        function loop() {
            requestAnimationFrame(loop)

            updateGrid()
            drawGrid()
        }
        loop()

        function initGrid() {
            // Fill the grid data structure with initial random colors
            for (let x = 0; x < canvas.width; x+= gridSize) {
                for (let y = 0; y < canvas.height; y+= gridSize) {
                    const color = Math.random() * 360
                    grid[`${x}_${y}`] = color
                }
            }
        }

        function updateGrid() {
            for (let x = 0; x < canvas.width; x+= gridSize) {
                for (let y = 0; y < canvas.height; y+= gridSize) {
                    let currentColor = grid[`${x}_${y}`]
                    // modify the color of the current square
                    // given the color it currently has
                    grid[`${x}_${y}`] = currentColor
                }
            }
        }

        function drawGrid() {
            // draw whatever is currently stored in the grid variable
            for (let x = 0; x < canvas.width; x+= gridSize) {
                for (let y = 0; y < canvas.height; y+= gridSize) {
                    const color = grid[`${x}_${y}`]
                    ctx.fillStyle = `hsl(${color}, 70%, 60%)`;
                    ctx.fillRect(x, y, gridSize, gridSize);
                }
            }
        }


    </script>
</body>
</html>